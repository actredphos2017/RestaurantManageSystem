<!DOCTYPE html>
<html lang="cn" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>登录到管理员</title>
    <link th:href="@{css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet"/>

    <style th:inline="text">
        .backgroundImage {
            background-image: url("[[@{/}]]img/background.png");
            width: 100%;
            height: 100%;
            object-fit: cover;
            background-size: cover;
            position: fixed;
            filter: blur(5px);
        }
        .backgroundImageBlur {
            background-image: url("[[@{/}]]img/background.png");
            width: 100%;
            height: 100%;
            object-fit: cover;
            background-size: cover;
            position: fixed;
            filter: blur(16px);
        }
    </style>
</head>
<body>

<div class="backgroundImage"></div>

<div class="backgroundImageBlur"></div>

<div th:text="${failedReason}"></div>

<div class="container text-center d-flex justify-content-center align-items-center shadow">
    <div style="position: absolute; top: 50%; transform: translate(0, -50%);">
        <form action="/login" method="post" onsubmit="return validateForm();">
            <div class="card mb-3 my-4" style="max-width: 700px;">
                <div class="row g-0">
                    <div class="col-md-6">
                        <img class="rounded" th:src="@{img/background.png}"
                             src="../static/img/background.png"
                             style="object-fit: cover; width: 100%; height: 100%"
                             alt="HeadPic"/>
                    </div>

                    <div class="col-md-6">
                        <h3 class="card-title mb-3 mt-4"> 餐厅管理系统 </h3>
                        <div class="d-grid card-body">

                            <div class="form-floating mb-3">
                                <input type="text" name="username" class="form-control" id="username"
                                       placeholder="餐厅 ID">
                                <label for="username">餐厅 ID</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="password" name="password" class="form-control" id="password"
                                       placeholder="密码">
                                <label for="password">密码</label>
                            </div>

                            <div class="btn-group mb-3" role="group" aria-label="Basic checkbox toggle button group">
                                <input type="checkbox" class="btn-check" id="rememberPwd" autocomplete="off">
                                <label class="btn btn-outline-primary display-1" for="rememberPwd">记住密码</label>

                                <input type="checkbox" class="btn-check" id="autoLogin" autocomplete="off">
                                <label class="btn btn-outline-primary display-1" for="autoLogin">自动登录</label>
                            </div>
                            <div class="d-grid gap-2  mb-3">
                                <button type="submit" class="btn btn-primary">登录</button>
                                <a href="/register" class="btn btn-outline-dark">注册</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script th:src="@{js/bootstrap.js}"></script>
<script src="../static/js/bootstrap.js"></script>

<script>

    function validateForm() {
        let username = document.getElementById("username");
        let password = document.getElementById("password");
        let check = true;

        if (!username.value) {
            username.className = "form-control is-invalid";
            check = false;
        } else username.className = "form-control";

        if (!password.value) {
            password.className = "form-control is-invalid";
            check = false;
        } else password.className = "form-control";

        return check;
    }

    let cb_rememberPwd = document.getElementById("rememberPwd");
    let cb_autoLogin = document.getElementById("autoLogin");

    cb_autoLogin.addEventListener("change", function () {
        if (cb_autoLogin.checked) cb_rememberPwd.checked = true;
    });

    cb_rememberPwd.addEventListener("change", function () {
        if (!cb_rememberPwd.checked) cb_autoLogin.checked = false;
    });
</script>
</body>
</html>